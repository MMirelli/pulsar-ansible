#
# Software binary release and version
# -------------------------------------------
#
# - AdminConsole release
adminConsole_ver: "1.2.9"
adminConsole_bin_name: "pulsar-admin-console-{{ adminConsole_ver }}.tar.gz"

# - Node.js (needed by AdminConsole) 
tgt_nodejs_ver_major: "14"
tgt_nodejs_ver_minor: "19.0"
tgt_nodejs_ver: "{{ tgt_nodejs_ver_major }}.{{ tgt_nodejs_ver_minor }}"
# - whether or not force installing nodejs even if it already exists
force_nodejs_install: no

# - Nginx (needed by AdminConsole)
#   > NOTE: version 1.17.9 is probably too old and can't be found as an apt package
# nginx_ver: 1.17.9 
tgt_nginx_ver: 1.20.2
# whether or not force installing nginx even if it already exists
force_nginx_install: no


#
# Downlaod software binaries from external internet URLs
# -------------------------------------------
#
# - AdminConsole download
adminConsole_download_url_base: "https://github.com/datastax/pulsar-admin-console/releases/download/"
adminConsole_download_url: "{{ adminConsole_download_url_base }}/{{ adminConsole_ver }}/{{ adminConsole_bin_name }}"
# - Nodejs download
nodejs_download_url_base: "https://nodejs.org/download/release/latest-v{{ nodejs_ver_major }}.x/"
nodejs_download_url: "{{ nodejs_download_url_base }}/{{ nodejs_bin_name }}"


#
# AdminConsole specific settings
# -------------------------------------------
#
# - Target package and binary directories
tgt_pkg_adminConsole_dir: "{{ tgt_pkg_homedir }}/pulsar_admin_console"
tgt_adminConsole_inst_dir: /opt/pulsarAdminConsole
tgt_adminConsole_sec_dir: "{{ tgt_adminConsole_inst_dir }}/security"

# - AdminConsole listending port (DO NOT change it. This is a constant)
ac_listen_port: 6454

# - Whehter or not to force replacing the existing AdminConsole server side JWT token files
force_existing_adminConsole_jwt_token: false
# - Whehter or not to force replacing the existing AdminConsole server side TLS certificate files
force_existing_adminConsole_tls_certs: false


#
# Nginx specific settings
# -------------------------------------------
#
# - Whether or not to start Nginx using systemd serivce script
#   NOTE: treat this as a constant (e.g. always start Nginx server from command line instead of using systemd service)
systemd_nginx_svc: false
nginx_bin_file: /usr/sbin/nginx

# - When starting Nginx using systemd, use system default settings
nginx_dft_config_dir: /etc/nginx
nginx_dft_log_dir: /var/log/nginx
nginx_dft_pid_file: /var/run/nginx.pid

# - When not starting Nginx using systemd, use customized settigns
nginx_cust_config_dir: "{{ tgt_adminConsole_inst_dir }}/nginx"
nginx_cust_log_dir: "{{ tgt_adminConsole_inst_dir }}/nginx/logs"
nginx_cust_pid_file: "{{ nginx_cust_config_dir }}/nginx.pid"

# 
nginx_log_dir: "{% if systemd_nginx_svc is defined and systemd_nginx_svc|bool %}{{ nginx_dft_log_dir }}{% else %}{{ nginx_cust_log_dir }}{% endif %}"
nginx_config_dir: "{% if systemd_nginx_svc is defined and systemd_nginx_svc|bool %}{{ nginx_dft_config_dir }}{% else %}{{ nginx_cust_config_dir }}{% endif %}"
nginx_config_file: "{{ nginx_config_dir }}/nginx.conf"
nginx_pid_file: "{% if systemd_nginx_svc is defined and systemd_nginx_svc|bool %}{{ nginx_dft_pid_file }}{% else %}{{ nginx_cust_pid_file }}{% endif %}"


nginx_listen_port: 9090
nginx_status_port: 9091

# TBD: add support for Nginx security (e.g. AuthN, HTTPS, etc.)
# nginx_listen_port_tls: 9443
# enable_nginx_https: true


#
# Template placeholders 
# -------------------------------------------
#
# - AdminConsole dashboard config.js template place holder
placeHolder_homeCluster: "<<home_cluster>>"
placeHolder_brokerSvcUrl: "<<broker_svc_url>>"
placeHolder_webSvcUrl: "<<web_svc_url>>"
placeHolder_apiVersion: "<<api_version>>"
placeHolder_clientToken: "<<client_token>>"
placeHolder_caCertificate: "<<ca_certificate>>"
placeHolder_acListenHost: "<<ac_host_name>>"
placeHolder_acListenPort: "<<ac_listen_port>>"

# - Nginx config template place holder
placeHolder_brkrWebPortList: "<<pulsar_broker_webport_list>>" 
placeHolder_brkrWebPortTlsList: "<<pulsar_broker_webport_tls_list>>"
placeHolder_nginxLogDir: "<<ngx_log_dir>>"
placeHolder_nginxPid: "<<ngx_pid>>"
placeHolder_nginxListenPort: "<<ngx_listen_port>>"
placeHolder_nginxStatusPort: "<<ngx_status_port>>"