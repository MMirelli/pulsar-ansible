---
##
# For each cluster, get Zookeeper node list in main zookeeper configuration file, e.g.
#   <zookeeper_node_1>:2888:3888
#   <zookeeper_node_2>:2888:3888
#   <zookeeper_node_3>:2888:3888
- name: Get "zookeeper" configuration (IP:Port:Port) list into a variable
  set_fact: 
    zkArrVar: |
      {% set zklist = [] %}
      {% for node in groups['zookeeper'] %}
      {%   set ignored = zklist.append(hostvars[node].private_ip + ':2888:3888') %}
      {% endfor %}
      {{ zklist }}
- debug: msg="zkArrVar - {{ zkArrVar|trim }}"
  when: show_debug_msg|bool 

# For each cluster, get a string for all zookeeper nodes with listening ports, e.g.
#   <zookeeper_node_1>:2181,<zookeeper_node_2>:2181,<zookeeper_node_3>:2181
- name: Get "zookeeper" (IP:Port) string into a variable
  set_fact: 
    zkListStrVar: |
      {% set zklist = [] %}
      {% for node in groups['zookeeper'] %}
      {%   set ignored = zklist.append(hostvars[node].private_ip ~ ':' ~ zk_clnt_port) %}
      {% endfor %}
      {{ zklist|join(',') }}
- debug: msg="zkListStrVar - {{ zkListStrVar|trim }}"
  when: show_debug_msg|bool 