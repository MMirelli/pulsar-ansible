---
- name: Assign bookies to racks
  shell: "{% if sudo_needed|bool %}sudo -u {{ pulsar_user }} {% endif %}{{ srv_options|trim }} {{ tgt_pulsar_inst_dir }}/bin/pulsar-admin bookies set-bookie-rack --bookie {{ private_ip }}:{{ bookie_listening_port }} --rack {{ rack_name }} --hostname {{ private_ip }}"
  # ignore_errors: yes
  register: bookie_setrack_cmd
- debug: msg="bookie_setrack_cmd.failed - {{ bookie_setrack_cmd.failed }}"
  when: show_debug_msg|bool